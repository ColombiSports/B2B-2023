@use "./../abstract/Product";
@use "./../abstract/Promotion";

/**
	LES MINIATURES ARTICLES ////////////////////////////////////////////////////////

	Est une extention de la class abstraite "Product" censée définir
	tous les éléments globaux d'une article: couleur, fonte...

	Ne gère pas l'aspect des INDISPONIBLES : c'est le parent "bootstrapé" qui s'occupe
	des effets à appliquer.
**/
.product-thumbnail {
	// Se laisse placer et étirer par son parent Grid
	position: relative;
	//
	// Décoration
	@extend .abstract-Product--card;

	// Aligne les éléments internes dans une colonne aligner sur la gauche
	display: flex;
	flex-direction: column;
	flex-wrap: nowrap;
	transition: var(--global__transition--all);

	// Définit les propriétés de la carte avant survol.
	--thumbnail__buton__color: var(--global__color__accent); //Le boutton PANIER
	--thumbnail__icon__color: white; // var(--global__background-color); // L'icone du bouton PANIER
	--thumbnail__ribbon__color: var(--colormap__product-color); // Le ruban PROMOTION
	--thumbnail__input__width: 7.5rem;
	--thumbnail__input__padding: 0.5rem 0rem 0.5rem 0rem;
	--thumbnail__button__right: 0.5rem;
	--thumbnail__input_shadow: 0 0 1rem #00000000;

	&:hover {
		// Définit en amont par "abstract-Product" ----------------------------
		--product__code__color: white;
		--product__border__color: white;
		--product__rga__color: white;
		--product__libelle__color: white;
		--product__price__color: white;
		--product__marque__logo: var(--marque__logo-white__url);
		--product__stock__color: white;
		//
		--global__color__promo: white;
		--global__color__promo--text: var(--colormap__product-color);
		//
		--thumbnail__buton__color: white; // var(--global__foreground-color);
		--thumbnail__icon__color: var(--colormap__product-color); // var(--global__background-color);
		--thumbnail__ribbon__color: black;
		//
		background-color: var(--colormap__product-color);
		box-shadow: none;
	}

	/**
		LE LIEN DES IMAGES --------------------------------------------------
	**/
	& > a {
		grid-area: image;
		border: none;
	}

	/**
		LE STATUS DE L'ARTICLE ---------------------------------------------
	**/
	@extend .abstract-Product--Status;
	--product__status__top: 6.5rem;
	--product__status__left: -3px;

	/**
		LE CODE ARTICLE ----------------------------------------------------
	**/
	.product-code {
		padding-top: 2rem; // Eloigne verticalement de l'image
		margin: 0 0 2rem 0; // Décale l'ensemble vers la droite
		&:before {
			margin-left: -2rem; // Ramène le trait vers la gaucuhe
		}
	}

	/**
		LA DESIGNATION ARTICLE ---------------------------------------------
	**/
	.product-libelle {
		height: 7rem !important ;
	}

	/**
		LA REMISE PROMO DE L'ARTICLE --------------------------------------
	**/
	.product-promotion.ribbon-top-right {
		@extend .abstract-Promotion;
	}

	/**
		LE PARENT DES INFOS PRODUITS --------------------
		// Celui à ne pas utiliser dans l'imbriquage
		// Structure des des infos de la miniature
	**/
	.product-caption {
		display: grid;
		grid-template-columns: 1fr;
		grid-template-rows: auto 9rem 3.5rem 3rem 0;
		grid-template-areas:
			"code"
			"libelle"
			"prix_tarif"
			"prix_public";
		//
		align-items: start;
		background: none;
		padding: 0;
		border: none;
		margin-top: 1.5rem;
		//

		// prettier-ignore
		& div[data-toggle="prix-public"] { grid-area: prix_public ;}
		// prettier-ignore
		& div[data-toggle="prix-tarif"] { grid-area: prix_tarif ; }

		& > div {
			padding: 0; // Surécrit Bootstrap pour réaligner les paddings
		}
	}

	form {
		display: contents;
	}
	.product-panier-wrapper {
		position: absolute;
		width: calc(100% - 4rem);
		height: 8rem;
		bottom: 0;

		&:hover {
			--thumbnail__buton__color: var(--global__foreground-color);
			--thumbnail__icon__color: var(--global__background-color);
			--thumbnail__input_shadow: 0 0 1rem #00000099;
			//
			--thumbnail__input__width: 20rem;
			--thumbnail__input__padding: 0.5rem 9rem 0.5rem 0.5rem;
			--thumbnail__button__right: -2rem;
		}
	}
	//.product-marque,
	.product-panier {
		// prettier-ignore
		&-col-text { display: none; } // Le mot "Qte" d'origine
		// prettier-ignore
		&-col-input .label {display: none; } // Le second mot "Qte" d'origine

		&-col-input {
			position: absolute;
			height: 7.5rem;
			width: var(--thumbnail__input__width);
			right: var(--thumbnail__button__right);
			bottom: 1.25rem;
			margin: 0 !important ; // Surécrit Bootstrap
			padding: var(--thumbnail__input__padding);
			border-radius: var(--global__UI__border-radius--input);
			background-color: var(--global__background-color);
			transition: var(--global__transition--all);
			box-shadow: var(--thumbnail__input_shadow);
			overflow: hidden;

			&:after {
				content: "Quantité";
				font-size: var(--global__font-size__xs);
				margin: 0rem 1rem 0 1rem;
				color: var(--global__foreground-color);
				text-align: right;
				display: block;
			}
			input {
				background-color: transparent;
				border-radius: 0 !important ;
				color: var(--global__foreground-color) !important;
				font-weight: var(--global__font-weight__bold) !important;
				font-size: var(--global__font-size__lg) !important ;
				border-color: transparent !important ;
				text-align: right;
				padding: 0 !important;
				margin: 0 !important ;
			}
		}
		&-col-button .btn-add-cart {
			// BOUTON AJOUTER AU PANIER //////////////////////////////////////////////
			display: grid;
			place-content: center;
			position: absolute;
			width: 8rem;
			height: 8rem;
			right: var(--thumbnail__button__right);
			bottom: 1rem;
			//
			color: var(--thumbnail__icon__color) !important;
			border-color: var(--thumbnail__buton__color) !important;
			background-color: var(--thumbnail__buton__color) !important;
			box-shadow: var(--thumbnail__input_shadow);

			&:hover {
				.fa-shopping-cart:before {
					content: "\f217";
				}
			}
			.fa-shopping-cart {
				font-size: var(--global__font-size__xl);
			}
			// prettier-ignore
			span { display: none; }
			// Masque le mot "PANIER"
		}
	}
}
