@use "./../abstract/Product";
@use "./../abstract/Promotion";

/**
	LES MINIATURES ARTICLES ///////////////////////////////////////////

	Est une extention de la class abstraite "Product" censée définir
	tous les éléments globaux d'une article: couleur, fonte...

	Ne gère pas l'aspect des INDISPONIBLES : c'est le parent "bootstrapé" qui s'occupe
	des effets à appliquer.
**/

.product-thumbnail {
	// Se laisse placer par son parent Grid
	position: relative;
	overflow: hidden;
	//
	// Décoration
	@extend .abstract-Product--card;

	// Structure de la miniature
	display: grid;
	grid-template-columns: 1fr 1fr;
	grid-template-rows: auto 1fr auto 8rem 5rem 4rem;
	grid-template-areas:
		"marque 		."
		"image		image"
		"code 		code"
		"libelle 		libelle"
		"prix_tarif 	prix_tarif "
		"prix_public	prix_public";
	align-items: start;

	/** 
		Cassage du container pour réorganiser selon nos besoins
	**/
	// prettier-ignore
	.product-caption { display: contents; }

	// Définit les couleurs de la carte avant survol.
	--product__button__color: var(--global__color__accent); // Boutton PANIER
	--product__icon__color: var(--global__foreground-color); // L'icone du bouton PANIER
	--product__ribbon__color: var(--colormap__product-color); // Le ruban PROMOTION
	//
	--input__right: -12rem;
	transition: var(--global__transition--all);

	// prettier-ignore
	@media (prefers-color-scheme: light) { & { --product__marque__logo: var(--marque__logo-color__url);}}
	// prettier-ignore
	@media (prefers-color-scheme: dark) { & { --product__marque__logo: var(--marque__logo-white__url); } }

	&:hover {
		// Définit en amont par "abstract-Product"
		--product__code__color: white;
		--product__border__color: white;
		--product__rga__color: white;
		--product__libelle__color: white;
		--product__price__color: white;
		--global__color__promo: white;
		--global__color__promo--text: var(--colormap__product-color);
		//
		// Définit
		--product__button__color: white;
		--product__icon__color: var(--colormap__product-color);
		--product__ribbon__color: black;
		--product__marque__logo: var(--marque__logo-white__url);

		--stock-color: white;

		--input__right: 2rem;

		background-color: var(--colormap__product-color);
		box-shadow: none;
	}
	> a {
		grid-area: image;
	}

	// LE LOGO DE LA MARQUE
	div[class*="product-marque"] {
		position: relative;
		text-align: unset;
		margin-bottom: 2rem;
		height: 50px;
		padding: 0;
		&::before {
			width: 100%;
			height: 100%;
			content: "";
			position: absolute;
			background: var(--product__marque__logo);
			background-size: contain;
			background-position: left center;
			background-repeat: no-repeat;
		}
	}

	@extend .abstract-Product--Status;
	--product__status__top: 9.5rem;
	--product__status__left: -3px;

	.product-promotion.ribbon-top-right {
		// grid-area: promo; // Sortit de la grille
		@extend .abstract-Promotion;
	}
	/**
		LE PARENT DES INFOS PRODUITS ----------------------------------------
		Celui à ne pas utiliser dans l'incustre
	**/

	.product-caption {
		// prettier-ignore
		& div[data-toggle="prix-public"] { grid-area: prix_public ;}
		// prettier-ignore
		& div[data-toggle="prix-tarif"] { grid-area: prix_tarif ; }

		&:hover {
			--input__opacity: 1;
			--input__transform: translate(0);
		}
		& > div {
			padding: 0; // Surécrit Bootstrap

			&.product-code {
				padding-top: 2rem;
			}
			&.product-code {
				&::before {
					// padding: calc(var(--card__padding) * -1rem);
				}
			}
			&.product-libelle {
				height: 7rem;
			}

			&.product-prix {
			}
		}
	}

	form {
		display: contents;
	}
	//.product-marque,
	.product-panier {
		&-wrapper {
			--input__opacity: 1;
			--input__transform: translate(100%);

			display: flex;
			flex-direction: column;
			flex-wrap: nowrap;
			align-items: flex-end;
			position: absolute;
			right: 0;
			bottom: 0;
			margin: 0;
			transition: var(--global__transition--all);

			&:hover,
			&:focus-within {
				//background-color: bisque;

				--input__opacity: 1;
				--input__transform: translate(0);
			}
		}
		// prettier-ignore
		&-col-text { display: none; }

		// prettier-ignore
		&-col-input .label {display: none; }

		&-col-input {
			position: absolute;
			// margin: 0;
			// flex: unset;
			// opacity: var(--input__opacity);
			// transform: var(--input__transform);
			bottom: 8rem;
			width: 11rem;
			right: var(--input__right);
			opacity: var(--input__opacity);
			transition: var(--global__transition--all);

			input {
				// background: none;
				// border: none !important ;
				// border-radius: 0 !important ;
				// border-bottom: var(--global__UI__border-style) !important ;
				font-weight: var(--global__font-weight__bold) !important;
				font-size: var(--global__font-size__lg) !important ;
				text-align: right;
				padding: 0 1rem !important;
				margin: 0 !important ;
				right: 0;
			}
		}
		&-col-button .btn-add-cart {
			// BOUTON AJOUTER AU PANIER //////////////////////////////////////////////

			display: grid;
			place-content: center;
			width: 8rem;
			height: 8rem;
			position: absolute;
			right: 0rem;
			bottom: 1rem;

			//--product-button__color: red; // var(--global__background-color);
			color: var(--product__icon__color) !important;
			border-color: var(--product__button__color) !important;
			background-color: var(--product__button__color) !important;

			&:hover {
				.fa-shopping-cart:before {
					content: "\f217";
				}
			}
			.fa-shopping-cart {
				font-size: var(--global__font-size__xl);
			}
			// prettier-ignore
			span { display: none; }
			// Masque le mot "PANIER"
		}
	}
}
