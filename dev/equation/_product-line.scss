@use "./../abstract/Product";
@use "./../abstract/Promotion";
@use "./../utils/breakpoints" as *;

/**
	Affichage des miniatures en ligne
**/
.container .product-line {
	@extend .abstract-Product--card;

	// LA GRILLE DES 3 BLOCS /////////////////////////////////////////////////////////

	display: grid;
	grid-template-columns: 7rem 1fr 5rem;
	grid-template-rows: 1fr;
	grid-template-areas: "left center right";
	gap: 2rem;

	// Applique le bandeau "status" : NOUVEAU, PRECOMMANDE, ETC....
	@extend .abstract-Product--Status;
	--product__status__top: -0.5rem;
	--product__status__left: 18rem;
	--product__status__font-size: var(--global__font-size__sm);

	// En mode tablette -------------------------------------------------------------
	// prettier-ignore
	@include for-tablet { & {
		padding: 1rem;
		border-radius: calc(var(--global__UI__border-radius--card) * 0.5);
		//
		grid-template-columns: 7rem 1fr 7rem;
		grid-template-rows: 7rem 1fr;
		grid-template-areas:
			"left		center	right"
			".		center	right";

		// Déplace le bandeau "status" à droite
		&::before, &::after{
			left: unset !important ;
			right: 0 ;
		}	
	} }
	@include for-phone {
		& {
			padding: 1rem;
			border-radius: calc(var(--global__UI__border-radius--card) * 0.5);
			//
			grid-template-columns: 7rem 1fr;
			grid-template-rows: 7rem 1fr;
			grid-template-areas:
				"left		center"
				"right	center";

			// Déplace le bandeau "status" à droite
			&::before,
			&::after {
				left: unset !important ;
				right: 0;
			}
		}
	}

	// LE BLOC DE L'IMAGE /////////////////////////////////////////////////////////
	.left {
		grid-area: left;
		//
		flex: 0 0 7rem;
		min-width: 7rem;
		max-height: 7rem;
		display: block;

		// Le lien et son image
		a {
			border: none;
			mix-blend-mode: multiply;
			max-width: 5rem !important;
			max-height: 5rem !important;
			aspect-ratio: 1 / 1;
			display: grid;
			place-content: center;
			// prettier-ignore
			img { max-height: 5rem !important ; }
		}
	}

	// LE BLOC DES INFOS PRODUITS ///////////////////////////////////////////////
	.center {
		grid-area: center;
		padding-right: 0;
		//
		// Layout en mode "ligne" ---------------------------------------------
		display: grid;
		grid-template-columns: 8rem 1fr 12rem 12rem;
		grid-template-rows: 2rem 1fr;
		grid-template-areas:
			"code		rga		prix_tarif	prix_public"
			"libelle	libelle	prix_tarif	prix_public";
		align-items: center;
		gap: 1rem;
		//
		// Layout tablette ---------------------------------------------------
		// prettier-ignore
		@include for-tablet { & {
			grid-template-columns: 12rem 1fr ;
			grid-template-rows: 2rem 1fr 1fr ;
			grid-template-areas:
				"code		rga"
				"libelle	libelle"
				"prix_tarif	prix_public";
			align-items: start;
		}}
		// Layout telephone --------------------------------------------------
		// prettier-ignore
		@include for-phone { & {
			display: flex ;
			flex-flow: column nowrap ;
		}}
		//
		// prettier-ignore
		& p:first-of-type{ display: contents; }
		// Libère le block "code"

		// Les éléments ---------------------------------------------------
		.product-code {
			flex: 0 0 3rem;
			font-size: var(--global__font-size__xs) !important ;
		}
		.product-libelle {
			font-size: var(--global__font-size__sm);
		}
		.product-promotion {
			display: none;
			@extend .abstract-Promotion;
		}
		// Attibution des noms d'espaces pour l'inversion
		p.product-prix {
			transform: scale(0.8) !important ;

			.show-prix-public &[data-toggle="prix-tarif"] {
				transform-origin: right center;
			}
			.show-prix-public &[data-toggle="prix-public"] {
				transform: scale(1) !important ;
				transform-origin: left center;
			}
		}
	}
	// LE BLOC PANIER ///////////////////////////////////////////////////////////////////////
	.right {
		grid-area: right;
		flex: 0 0 5rem;
		display: grid;
		place-content: center;

		// prettier-ignore
		form p:first-of-type { display: none; }
		// Masque le champ des quantités

		// Le boutton du panier plus petit que normal
		.btn-add-cart {
			grid-area: addCart;
			position: relative;

			--btn-add-cart__size: 5rem;
			i {
				font-size: var(--global__font-size__md);
			}
		}
	}
}
